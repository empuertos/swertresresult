<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>3D Lotto OBS Snippet</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    /* Transparent background for OBS overlay */
    body {
      margin: 0;
      padding: 8px 12px;
      background: rgba(0,0,0,0);
      color: #ffffff;
      font-family: "Segoe UI", system-ui,-apple-system,BlinkMacSystemFont,monospace;
      font-size: 20px;
      line-height: 1.2;
      -webkit-font-smoothing: antialiased;
      display: inline-block;
      white-space: pre;
    }
    .container {
      background: rgba(0,0,0,0.6);
      padding: 10px 14px;
      border-radius: 8px;
      display: inline-block;
      min-width: 260px;
    }
    .title {
      font-weight: 700;
      margin: 0 0 4px 0;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .line {
      margin: 0;
    }
    .highlight {
      font-weight: 600;
    }
    .small {
      font-size: 0.85em;
      opacity: 0.9;
    }
    .editable {
      background: rgba(255,255,255,0.05);
      border: none;
      color: #fff;
      font: inherit;
      width: 60px;
      padding: 0 4px;
      border-radius: 4px;
      text-align: center;
    }
    .label {
      display: inline-block;
      width: 90px;
    }
    .hidden-inputs { display: none; }
  </style>
</head>
<body>
  <div class="container" aria-label="3D Lotto Results OBS snippet">
    <div class="title">ðŸŽ² 3D Lotto Results Today</div>
    <div class="line small" id="lastUpdated">Last updated: --:--:-- AM</div>
    <div class="line">
      <span class="label">2:00 PM:</span>
      <input class="editable" id="r2" maxlength="10" placeholder="â€”" />
    </div>
    <div class="line">
      <span class="label">5:00 PM:</span>
      <input class="editable" id="r5" maxlength="10" placeholder="â€”" />
    </div>
    <div class="line">
      <span class="label">9:00 PM:</span>
      <input class="editable" id="r9" maxlength="10" placeholder="â€”" />
    </div>
  </div>

  <script>
    // Utilities
    function getManilaTimeString() {
      const now = new Date();
      return now.toLocaleTimeString("en-US", {
        hour12: true,
        hour: "numeric",
        minute: "2-digit",
        second: "2-digit",
        timeZone: "Asia/Manila"
      });
    }

    // Elements
    const lastUpdatedEl = document.getElementById("lastUpdated");
    const input2 = document.getElementById("r2");
    const input5 = document.getElementById("r5");
    const input9 = document.getElementById("r9");

    // Load persisted
    function load() {
      try {
        const saved = JSON.parse(localStorage.getItem("obs_lotto_snippet") || "{}");
        if (saved["2pm"]) input2.value = saved["2pm"];
        if (saved["5pm"]) input5.value = saved["5pm"];
        if (saved["9pm"]) input9.value = saved["9pm"];
      } catch {}
    }

    // Persist on change
    function persist() {
      const obj = {
        "2pm": input2.value.trim(),
        "5pm": input5.value.trim(),
        "9pm": input9.value.trim()
      };
      localStorage.setItem("obs_lotto_snippet", JSON.stringify(obj));
    }

    // Update time every second
    setInterval(() => {
      lastUpdatedEl.textContent = "Last updated: " + getManilaTimeString();
    }, 1000);

    // Hooks
    [input2, input5, input9].forEach(i => {
      i.addEventListener("input", persist);
    });

    // Initialize
    load();
    lastUpdatedEl.textContent = "Last updated: " + getManilaTimeString();
  </script>
</body>
</html>
